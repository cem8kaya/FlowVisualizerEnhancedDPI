apiVersion: v1
kind: ConfigMap
metadata:
  name: callflowd-config
  namespace: callflowd
data:
  config.json: |
    {
      "server": {
        "bind_address": "0.0.0.0",
        "port": 8080,
        "workers": 4,
        "max_upload_size_mb": 10240,
        "websocket_port": 8081
      },
      "processing": {
        "worker_threads": 8,
        "packet_queue_size": 10000,
        "flow_timeout_sec": 300
      },
      "database": {
        "enabled": true,
        "path": "/app/db/callflowd.db",
        "retention_days": 7
      },
      "auth": {
        "enabled": true,
        "jwt_expiry_hours": 24,
        "allow_registration": false,
        "default_roles": ["user"]
      },
      "rate_limiting": {
        "enabled": true,
        "requests_per_minute": 60,
        "burst_size": 10
      },
      "monitoring": {
        "enable_prometheus": true,
        "enable_analytics": true
      }
    }
